<!doctype html><html lang="en" data-bs-theme="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Development Journey Series"><meta name="author" content="Justin Purnell"><meta name="generator" content="Ignite v0.2.1"><title>Documentation as Design</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/prism-default-dark.css" rel="stylesheet"><link href="/css/bootstrap-icons.min.css" rel="stylesheet"><link href="https://www.justinpurnell.com/BusinessMath/week-02/02-tue-documentation-as-design" rel="canonical"><meta property="og:site_name" content="Justin Purnell"><meta property="og:title" content="Documentation as Design"><meta property="twitter:title" content="Documentation as Design"><meta property="og:description" content="Documentation as Design"><meta name="twitter:description" content="Documentation as Design"><meta property="og:url" content="https://www.justinpurnell.com/BusinessMath/week-02/02-tue-documentation-as-design"><meta name="twitter:domain" content="justinpurnell.com"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:dnt" content="on"><meta name="description" content="**Entrepreneurial Strategist & Builder:** Justin Purnell is the Founder of **Ledge Partners**, dedicated to acquiring and leading profitable businesses. His foundation is built on seven years at **Goldman Sachs** as a high yield credit analyst, where he published over **400 research reports** and advised C-level executives.
**Product Innovation and Scale:** He led the complete **re-platforming of technology supporting over 70 e-commerce sites** globally as Head of Product at **Hotels at Home**. He actively builds technical solutions, including pioneering **AI-powered software** to automate product data generation and designing a Swift middleware prototype that cut vendor onboarding time from **four months to two weeks**.
**Driving Financial and Organizational Results:** At **NBCUniversal's Seeso**, he directed product operations and retention initiatives that resulted in a **40% increase in customer Lifetime Value**. He is adept at mobilizing cross-functional teams, having successfully stepped in to **referee a dispute** between NBC and a third-party vendor to foster consensus and launch the Content Commerce platform.
**Creative and Governance Leadership:** Justin combines corporate rigor with creative experience, having directed the Webby-awarded web series **Smart Girls at the Party** and serving as a founding producer for **UCBcomedy.com**. He maintains significant governance roles, including serving as **President of the Princeton University Class of 2000** (1,143 alumni) and managing its annual giving campaigns."><meta name="fediverse:creator" content="@jpurnell@mastodon.social"><meta name="tags" content="Product Manager, Strategy, Product Leader, Goldman Sachs, NBCUniversal, Hotels at Home, AI, LLM, Digital Transformation, e-commerce, Swift, Consensus Leadership, Leadership, Agile, DevOps, Continuous Integration, Continuous Deployment, Cloud, Data Science, Machine Learning, Python, JavaScript, Front-end, Back-end, Full-stack, Responsive Design, Accessibility, SEO, Content Strategy, User Experience, User Interface, Design, Agile, Product Strategy, Technical Strategy"><script>	(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-K3TZS8J');</script><link href="/css/main.css" rel="stylesheet"></head><body><div class="col-sm-10 mx-auto"><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K3TZS8J"
	height="0" width="0" style="display:none;visibility:hidden"></iframe>
<header><nav class="noPrint navbar navbar-expand-md" style="border-bottom: 0.01em solid #d5d5d5;"><div class="container-fluid col"><button type="button" class="navbar-toggler btn" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div id="navbarCollapse" class="collapse navbar-collapse"><ul class="navbar-nav mb-2 mb-md-0 col"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/about" class="nav-link">About</a></li><li class="nav-item"><a href="/cv" class="nav-link">CV</a></li><li class="nav-item"><a href="/business-math" class="nav-link">BusinessMath</a></li><li class="nav-item"><a href="/next" class="nav-link">NeXT</a></li></ul></div></div></nav></header><div class="row"><div class="col"><h1 class="mainTitle">Documentation as Design</h1><div style="margin-bottom: 2em"><p class="blogDateTime" style="margin-left: 1em">BusinessMath Development Journey</p><p class="blogDateTime" style="margin-left: 1em">8 min read</p></div><p class="mx-auto blurb" style="width: 70%; max-width: 800px"><p><strong>Development Journey Series</strong></p><hr /><h2>The Context</h2><p>We were implementing IRR (Internal Rate of Return) calculation for BusinessMath. IRR is conceptually simple—find the discount rate where NPV equals zero—but the implementation requires iterative solving with Newton-Raphson method.</p><p>I had a working implementation. The tests passed. The calculations were correct.</p><p><strong>But I couldn’t document it.</strong></p><p>When I tried to write the DocC documentation, I struggled to explain what the parameters meant, when the function would throw errors, and what users should expect. The act of documentation revealed design flaws in the API itself.</p><p>That’s when we discovered: <strong>If you can’t document it clearly, the API design is wrong.</strong></p><hr /><h2>The Challenge</h2><p>The traditional workflow puts documentation last:</p><ol><li>Design API (maybe)</li><li>Implement code</li><li>Write tests</li><li><strong>Finally</strong>: Document what you built</li></ol><p><strong>The problem</strong>: By step 4, you’ve invested heavily in the implementation. Changing the API now feels expensive. So you write convoluted documentation to explain a poorly designed API instead of fixing the root cause.</p><p>With AI generating code quickly, this problem accelerates. AI happily implements whatever you ask for, but it doesn’t push back on bad API design. You get working code with terrible interfaces.</p><p><strong>We needed to front-load the design validation.</strong></p><hr /><h2>The Solution</h2><p><strong>Write complete DocC documentation BEFORE implementing anything.</strong></p><h3>The Documentation-First Workflow</h3><p><strong>1. Write the DocC Tutorial First</strong></p><p>Before writing any implementation code, write the complete DocC article including:</p><ul><li>Overview of what the function does</li><li>Parameter descriptions</li><li>Return value explanation</li><li>Error cases</li><li>Usage examples (that won’t compile yet—that’s okay!)</li><li>See Also references</li></ul><p><strong>2. If Documentation Is Hard to Write, Redesign the API</strong></p><p>Struggling to document? That’s a signal. The API is confusing. Fix it now while it’s cheap.</p><p><strong>3. Use Documentation as AI Specification</strong></p><p>Once the documentation reads clearly, give it to AI as the implementation spec. The clearer your docs, the better AI’s implementation.</p><hr /><h2>The Results</h2><h3>Before: Hard to Document</h3><p>Here’s what AI generated on the first attempt:</p><pre><code class="language-swift">// BEFORE: Hard to document
public func calc(_ a: [Double], _ b: Double, _ c: Int) -> Double?
</code></pre><p><strong>Trying to document this</strong>:</p><pre><code class="language-swift">/// Calculates... something?
///
/// - Parameter a: An array of... values? Cash flows?
/// - Parameter b: A rate? Or is it a guess?
/// - Parameter c: Maximum... iterations? Or is it periods?
/// - Returns: The result, or nil if... it fails?
</code></pre><p>Even writing this, I had to guess what the parameters meant. That’s a sign of bad API design.</p><hr /><h3>After: Easy to Document</h3><p>After redesigning the API with documentation in mind:</p><pre><code class="language-swift">// AFTER: Easy to document
/// Calculates the internal rate of return for a series of cash flows.
///
/// The IRR is the discount rate that makes NPV equal to zero.
/// Uses Newton-Raphson method for iterative solving.
///
/// ## Usage Example
///
/// let cashFlows = [-1000, 300, 400, 500]
/// let irr = try calculateIRR(cashFlows: cashFlows)
/// print(irr.percent(1)) // "12.5%"
///
/// - Parameter cashFlows: Array of cash flows, starting with initial investment
/// - Returns: IRR as Double (0.125 = 12.5%)
/// - Throws: `FinancialError.convergenceFailure` if doesn't converge
public func calculateIRR(cashFlows: [Double]) throws -> Double
</code></pre><p><strong>Notice the difference</strong>:</p><ul><li>Function name is clear: <code>calculateIRR</code> (not <code>calc</code>)</li><li>Parameters are self-documenting: <code>cashFlows</code> (not <code>a</code>)</li><li>Return type is obvious: <code>Double</code> (not <code>Double?</code>)</li><li>Errors are explicit: <code>throws</code> (not returning <code>nil</code>)</li><li>Example is compilable and clear</li></ul><hr /><h2>What Worked</h2><h3>1. Documentation Revealed IRR Needed Error Handling</h3><p>The first attempt returned <code>Double?</code> (optional). But when I tried to document this:</p><pre><code class="language-swift">/// - Returns: The IRR, or nil if...
</code></pre><p>I couldn’t finish the sentence. <strong>What does nil mean?</strong></p><ul><li>Didn’t converge after max iterations?</li><li>Invalid cash flows (all positive)?</li><li>Something else?</li></ul><p>The documentation revealed the design flaw: we needed typed errors, not ambiguous nil.</p><p><strong>Fix</strong>:</p><pre><code class="language-swift">enum FinancialError: Error {
    case convergenceFailure
    case invalidCashFlows
}

public func calculateIRR(cashFlows: [Double]) throws -> Double
</code></pre><p>Now the documentation writes itself:</p><pre><code class="language-swift">/// - Throws: `FinancialError.convergenceFailure` if doesn't converge after 100 iterations
///          `FinancialError.invalidCashFlows` if all cash flows are positive
</code></pre><hr /><h3>2. Example Showed We Needed Better Formatting</h3><p>When writing the usage example, I wrote:</p><pre><code class="language-swift">let irr = try calculateIRR(cashFlows: cashFlows)
print(irr)  // Prints: 0.12456789
</code></pre><p>Looking at that output, I realized: <strong>Users will want percentages, not decimals.</strong></p><p>This led to adding format guidance in the documentation:</p><pre><code class="language-swift">print(irr.percent(1))  // "12.5%"
</code></pre><p><strong>Without writing the example first</strong>, I wouldn’t have caught this usability issue.</p><hr /><h3>3. AI Implementation Matched Documentation Perfectly</h3><p>Once the documentation was clear, I gave it to AI with this prompt:</p><blockquote><p>“Implement <code>calculateIRR</code> to match this documentation exactly. Use Newton-Raphson method. The function signature must match what’s documented.”</p></blockquote><p>AI’s implementation:</p><ul><li>✅ Matched the documented signature exactly</li><li>✅ Threw the documented errors</li><li>✅ Handled all edge cases mentioned in docs</li><li>✅ Passed the example from documentation</li></ul><p><strong>No back-and-forth</strong>. No debugging. The documentation was the specification, and AI executed it perfectly.</p><hr /><h2>What Didn’t Work</h2><h3>1. First Attempt at Documentation Was Too Vague</h3><p>My initial documentation attempt:</p><pre><code class="language-swift">/// Calculates IRR for cash flows.
///
/// - Parameter cashFlows: The cash flows
/// - Returns: The IRR
</code></pre><p>This tells you nothing. What’s the format? What are the units? What can go wrong?</p><p><strong>AI implemented it</strong>, but not the way I wanted. It made assumptions about default values, convergence tolerance, and error handling that didn’t match my intent.</p><p><strong>Fix</strong>: Be specific. Include units, formats, edge cases, and examples.</p><hr /><h3>2. Example Initially Didn’t Compile</h3><p>I wrote the example before implementing the function (good!), but I made a mistake:</p><pre><code class="language-swift">// Wrong:
let irr = calculateIRR([-1000, 300, 400, 500])  // Missing label!
</code></pre><p>When I tried to build the documentation, it failed.</p><p><strong>This is actually good!</strong> I caught the error in documentation, not in user code. Fixed it immediately:</p><pre><code class="language-swift">// Correct:
let irr = try calculateIRR(cashFlows: [-1000, 300, 400, 500])
</code></pre><p><strong>Lesson</strong>: Documentation examples should compile. If they don’t, fix the API before implementing.</p><hr /><h2>The Insight</h2><p><strong>If you can’t document it clearly, the API design is wrong. Fix it while it’s cheap.</strong></p><p>Documentation-first development creates a forcing function:</p><ul><li><strong>Vague function names</strong> become obvious when you try to document them</li><li><strong>Ambiguous parameters</strong> can’t be described clearly</li><li><strong>Missing error handling</strong> leaves gaps in documentation</li><li><strong>Poor usability</strong> shows up in examples</li></ul><p>By writing documentation first, you catch these issues <strong>before investing in implementation</strong>. Redesigning the API takes 5 minutes. Redesigning after implementation, tests, and integration takes hours.</p><blockquote><p><strong>Key Takeaway</strong>: Write DocC before implementation. If the docs are hard to write, the API is wrong. Fix it now, while it’s cheap.</p></blockquote><hr /><h2>How to Apply This</h2><p><strong>For your next feature</strong>:</p><p><strong>1. Write Complete DocC First</strong></p><ul><li>Overview paragraph</li><li>All parameters documented</li><li>Return value explained</li><li>Error cases listed</li><li>Example that shows realistic usage</li></ul><p><strong>2. Check for Red Flags</strong></p><ul><li>Struggling to name parameters clearly?</li><li>Can’t explain what nil means?</li><li>Example is confusing or complex?</li><li>Using words like “various” or “certain cases”?</li></ul><p><strong>3. Redesign if Needed</strong></p><ul><li>Rename parameters for clarity</li><li>Add or remove parameters</li><li>Change return type (optional → throws)</li><li>Simplify the API</li></ul><p><strong>4. Give Documentation to AI</strong></p><ul><li>“Implement this function to match the documentation exactly”</li><li>Paste the complete DocC block</li><li>AI will generate code that matches the spec</li></ul><p><strong>5. Verify Example Compiles</strong></p><ul><li>Build documentation in Xcode</li><li>Fix any compile errors</li><li>If examples don’t compile, API might still be wrong</li></ul><hr /><h2>See It In Action</h2><p>This practice is demonstrated throughout the BusinessMath library:</p><p><strong>Technical Examples</strong>:</p><ul><li><a href="../01-mon-data-tables"><strong>Data Table Analysis</strong> (Monday)</a>: Clear parameter names, typed inputs/outputs</li><li><a href="../03-wed-financial-ratios"><strong>Financial Ratios</strong> (Wednesday)</a>: Descriptive function names, documented return types</li><li><a href="../04-fri-risk-analytics"><strong>Risk Analytics</strong> (Friday)</a>: Error cases explicitly documented</li></ul><p><strong>Related Practices</strong>:</p><ul><li><a href="../../week-01/02-tue-test-first-development"><strong>Test-First Development</strong> (Week 1 Tuesday)</a>: Tests validate documented behavior</li><li><strong>Coding Standards</strong> (Week 5): Forbidden patterns include undocumented public APIs</li></ul><hr /><h2>Common Pitfalls</h2><h3>❌ Pitfall 1: Writing minimal documentation</h3><p><strong>Problem</strong>: “I’ll fill in details later” → Never happens<strong>Solution</strong>: Write complete docs now. It takes 10 minutes and saves hours.</p><h3>❌ Pitfall 2: Documenting after implementation</h3><p><strong>Problem</strong>: You’ll rationalize the existing API instead of improving it<strong>Solution</strong>: Docs first, always. Don’t compromise.</p><h3>❌ Pitfall 3: Examples that don’t compile</h3><p><strong>Problem</strong>: Users copy broken examples and get frustrated<strong>Solution</strong>: Build documentation in Xcode, fix compile errors immediately</p><hr /><h2>Discussion</h2><p><strong>Questions to consider</strong>:</p><ol><li>How much documentation is “enough” before implementing?</li><li>Should every function have an example, or just complex ones?</li><li>How do you balance documentation thoroughness with velocity?</li></ol><!--**Share your experience**: Have you tried documentation-first development? What did you learn?-->
<hr /><p><strong>Series Progress</strong>:</p><ul><li>Week: 2/12</li><li>Posts Published: 6/~48</li><li>Methodology Posts: 2/12</li><li>Practices Covered: Test-First, Documentation as Design</li></ul></p><hr /><div style="margin-top: 2em"><p class="blurb" style="font-style: italic">Tagged with: ai-collaboration, documentation, api-design, docc, development journey</p></div></div></div><header><nav class="noPrint navbar navbar-expand-md" style="border-top: 0.01em solid #d5d5d5;"><div class="container-fluid col"><button type="button" class="navbar-toggler btn" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div id="navbarCollapse" class="collapse navbar-collapse"><ul class="navbar-nav mb-2 mb-md-0 col"><li class="nav-item"><a href="mailto:morals.tech.0x@icloud.com" id="email" rel="me" target="_blank" class="nav-link">email</a></li><li class="nav-item"><a href="https://cal.com/jpurnell/15min" id="calendar" rel="me" target="_blank" class="nav-link">calendar</a></li><li class="nav-item"><a href="http://blog.justinpurnell.com" id="blog" rel="me" target="_blank" class="nav-link">blog</a></li><li class="nav-item"><a href="https://github.com/jpurnell" id="github" rel="me" target="_blank" class="nav-link">github</a></li><li class="nav-item"><a href="https://bsky.app/profile/justinpurnell.com" id="bsky" rel="me" target="_blank" class="nav-link">bsky</a></li><li class="nav-item"><a href="https://mastodon.social/@jpurnell" id="mastodon" rel="me" target="_blank" class="nav-link">mastodon</a></li><li class="nav-item"><a href="https://music.apple.com/us/station/justin-purnells-station/ra.u-a475786ae9cc432a1abb70ff757aa95f" id="radio" rel="me" target="_blank" class="nav-link">radio</a></li><li class="nav-item"><a href="http://blog.justinpurnell.com/rss" id="rss" rel="me" target="_blank" class="nav-link">rss</a></li><li class="nav-item"><a href="#" id="theme-toggle" rel="me" target="_blank" class="nav-link">theme</a></li></ul></div></div></nav></header><script src="/js/theme-toggle.js"></script></div><script src="/js/bootstrap.bundle.min.js"></script><script src="/js/syntax-highlighting.js"></script></body></html>